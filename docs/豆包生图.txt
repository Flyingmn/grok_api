初始化导航到
https://www.doubao.com/chat/


任务进来的两个分支  都是先看输入框 dom是否已经选择了图像生成的技能

分支1
如果当前页面是 https://www.doubao.com/chat/

输入框 dom  <div><div class="h-0 w-full"></div><div data-testid="skill-modal-image-skill" class="image-new-container-Woaxz7 test"><div class="input-content-container-zs4WWA" data-testid="chat_input"><div class="container-QrxCka"><div class="custom-area-wrapper-e6UKsv"><div class="placeholder-Kgrpqi"></div></div><div class="editor-container-yj5w_H" data-testid="skill-modal-image-creation" style="--custom-area-height: 0px;"><div class="editor-wrapper-AdiwSu"><div class="editor-u_GcDR flex items-start w-full"><span data-testid="skill_input_exit_button" contenteditable="false" class="container-X3mSoV exit-skill-button-SKn9lH borderless-yNFhuy"><span class="" tabindex="0" aria-describedby="3opo66x" data-popupid="3opo66x" style="display: inline-block;"><div class="flex items-center s-font-base-em text-s-color-brand-primary-default select-none" contenteditable="false">图像生成</div><span role="img" class="semi-icon semi-icon-default delete-icon-K8MZrV"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M1 12c0 6.075 4.925 11 11 11s11-4.925 11-11S18.075 1 12 1 1 5.925 1 12m9.586 0L7.465 8.878a1 1 0 0 1 1.414-1.414L12 10.586l3.121-3.122a1 1 0 1 1 1.415 1.414L13.414 12l3.122 3.121a1 1 0 0 1-1.415 1.414l-3.12-3.121-3.122 3.121a1 1 0 1 1-1.414-1.414z" clip-rule="evenodd"></path></svg></span></span></span><div role="textbox" aria-multiline="true" autocomplete="off" data-testid="chat_input_input" dir="ltr" class="container-f_kTYv pt-4 -mt-4 box-content editor-_J1VG_" data-slate-editor="true" data-slate-node="value" contenteditable="true" zindex="-1" style="position: relative; white-space: pre-wrap; overflow-wrap: break-word; min-height: 28px;"><div data-slate-node="element" class="paragraph-Ze3HjF"><span data-slate-node="text"><span data-slate-leaf="true" style="padding-left: 0.1px;"><span class="!top-4" data-slate-placeholder="true" contenteditable="false" style="position: absolute; top: 0px; pointer-events: none; width: 100%; max-width: 100%; display: block; opacity: 0.333; user-select: none; text-decoration: none;">描述你想要的图片</span><span data-slate-zero-width="n" data-slate-length="0">﻿<br></span></span></span></div></div></div></div><div class="bottom-wrapper-PqK2vl"><div class="left-tools-wrapper-INTHKl"><div><div class="bp5-overflow-list overflow-list-NyrGXN" style="--chat-input-tool-button-overflow-list-gap: 8px;"><div class="btn-xXZk0v" tabindex="0" aria-describedby="h11r827" data-popupid="h11r827"><button data-testid="image-creation-chat-input-picture-reference-button" class="semi-button semi-button-primary samantha-button-Gqjh9l tertiary-a_ZJsN small-vbX31F icon-kJ70hQ button-VMDZon small-lWyHoI semi-button-with-icon" type="button" aria-disabled="false"><span class="semi-button-content"><span role="img" class="semi-icon semi-icon-default text-16"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M20.5 5.25H4v10.11l1.594-1.328a2 2 0 0 1 2.581.017l1.636 1.401 4.119-3.463a2 2 0 0 1 1.55-.452A6.5 6.5 0 0 0 12.5 17c0 1.397.44 2.69 1.19 3.75H4a2 2 0 0 1-2-2V5.25a2 2 0 0 1 2-2h16.5a2 2 0 0 1 2 2v6.272a6.5 6.5 0 0 0-2-.848zm-12 6.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4M24 17a5 5 0 1 1-10 0 5 5 0 0 1 10 0m-4.25-2.5a.75.75 0 1 0-1.5 0v1.75H16.5a.75.75 0 1 0 0 1.5h1.75v1.75a.75.75 0 1 0 1.5 0v-1.75h1.75a.75.75 0 1 0 0-1.5h-1.75z" clip-rule="evenodd"></path></svg></span><span class="semi-button-content-right" x-semi-prop="children"><div class="flex items-center">参考图</div></span></span></button><input type="file" class="input-QqWhqy" multiple="" accept=".jpg,.png,.jpeg,.webp,"></div><button aria-expanded="false" aria-haspopup="dialog" tabindex="0" data-testid="image-creation-chat-input-picture-model-button" class="semi-button semi-button-primary samantha-button-Gqjh9l tertiary-a_ZJsN small-vbX31F icon-kJ70hQ button-VMDZon small-lWyHoI semi-button-with-icon" type="button" aria-disabled="false" aria-controls="poyhe8k" data-popupid="poyhe8k"><span class="semi-button-content"><span role="img" class="semi-icon semi-icon-default"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M12 20.571a8.5 8.5 0 0 1 2.5-6.08c1.43-1.429 3.5-2.49 6.071-2.491-2.571.002-4.617-1.075-6.05-2.508S12 6 12 3.428C12 6 10.954 8.095 9.517 9.532 8.081 10.968 6 12 3.428 12a8.52 8.52 0 0 1 6.082 2.516c1.43 1.43 2.487 3.484 2.49 6.055m-9.853-7.314c3.485.588 5.053 1.331 6.163 2.44s1.847 2.667 2.435 6.198c.105.627.603 1.105 1.26 1.105.664 0 1.156-.479 1.25-1.11.588-3.502 1.329-5.085 2.441-6.2 1.111-1.114 2.677-1.845 6.16-2.433.638-.075 1.144-.586 1.144-1.253 0-.668-.5-1.188-1.147-1.254-3.481-.59-5.026-1.347-6.137-2.46-1.112-1.115-1.872-2.674-2.46-6.171C13.16 1.482 12.671 1 12.003 1c-.66 0-1.155.481-1.259 1.114-.588 3.5-1.323 5.087-2.435 6.203C7.2 9.43 5.632 10.159 2.156 10.75 1.503 10.816 1 11.333 1 12.004c0 .68.52 1.17 1.147 1.253" clip-rule="evenodd"></path></svg></span><span class="semi-button-content-right" x-semi-prop="children"><div class="flex items-center">Seedream 4.0</div></span></span></button><button aria-expanded="false" aria-haspopup="dialog" tabindex="0" data-testid="image-creation-chat-input-picture-ration-button" class="semi-button semi-button-primary samantha-button-Gqjh9l tertiary-a_ZJsN small-vbX31F icon-kJ70hQ button-VMDZon small-lWyHoI semi-button-with-icon" type="button" aria-disabled="false" aria-controls="dg1ril8" data-popupid="dg1ril8"><span class="semi-button-content"><span role="img" class="semi-icon semi-icon-default"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M21 5H3v4h12.5a2 2 0 0 1 2 2v8H21zm-11 6H3v8h7zm2 8v-8h3.5v8zm-1 2h10a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2z" clip-rule="evenodd"></path></svg></span><span class="semi-button-content-right" x-semi-prop="children"><div class="flex items-center">比例</div></span></span></button><button aria-expanded="false" aria-haspopup="dialog" tabindex="0" data-testid="image-creation-chat-input-picture-style-button" class="semi-button semi-button-primary samantha-button-Gqjh9l tertiary-a_ZJsN small-vbX31F icon-kJ70hQ button-VMDZon small-lWyHoI semi-button-with-icon" type="button" aria-disabled="false" aria-controls="5e1douw" data-popupid="5e1douw"><span class="semi-button-content"><span role="img" class="semi-icon semi-icon-default"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="m11.565 15.21.471-.236q.5-.25.936-.596l-.047-.156a4.4 4.4 0 0 0-1.096-1.831 3.9 3.9 0 0 0-1.512-.942c-.283.331-.525.696-.72 1.086l-.236.47.01.01q.557.393 1.067 1.004.13.154.247.31zm.123 2.164q.065-.022.127-.053l1.115-.558a7.4 7.4 0 0 0 1.914-1.379 16.4 16.4 0 0 0 1.688-1.98l5.659-7.814a2 2 0 0 0-.206-2.588l-.183-.183-.233-.233a2 2 0 0 0-2.587-.206l-7.815 5.659a16.4 16.4 0 0 0-1.98 1.688 7.4 7.4 0 0 0-1.38 1.914l-.363.728c-.514.004-.99.145-1.409.365-1.167.611-1.945 1.852-2.325 2.715-.303.619-.586.93-.79 1.089a.9.9 0 0 1-.478.205c-.46.046-.968.28-1.252.774-.326.565-.212 1.217.184 1.675 2.598 3.005 5.873 2.695 7.381 2.011l.029-.013c.831-.407 1.97-1.242 2.55-2.49.188-.402.316-.847.354-1.326m3.224-5.143q-.361.5-.764.966a5.9 5.9 0 0 0-1.258-1.867c-.41-.41-.882-.75-1.396-1.01q.411-.345.846-.661l7.815-5.66.233.234.183.183zM5.66 16.326c.3-.688.826-1.415 1.368-1.699.231-.12.437-.15.657-.09.242.065.624.27 1.116.856.485.578.679 1.054.738 1.42.058.36-.002.683-.143.986-.3.644-.967 1.181-1.537 1.463-.73.324-2.456.583-4.101-.727q.238-.126.477-.31c.528-.412.998-1.019 1.407-1.86z" clip-rule="evenodd"></path></svg></span><span class="semi-button-content-right" x-semi-prop="children"><div class="flex items-center">风格</div></span></span></button><div class="bp5-overflow-list-spacer"></div></div></div></div><div class="tools-placeholder-QV9wFb"></div><div class="right-tools-wrapper-HlP9ga"><div class="container-T4Zbge"><div class="left-area-H3i4EB"><div class="flex items-center"><div class="container-YxRp9m tool-button-H7mj_a small-TgkvId"><div data-testid="asr_btn" class="mic-container-cr1fU5 cursor-pointer" tabindex="0" aria-describedby="jnn642t" data-popupid="jnn642t"><span role="img" class="semi-icon semi-icon-default icon-mic-S8J9fm"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M12 2.5A2.5 2.5 0 0 1 14.5 5v6a2.5 2.5 0 0 1-5 0V5A2.5 2.5 0 0 1 12 2.5M7.5 5a4.5 4.5 0 0 1 9 0v6a4.5 4.5 0 1 1-9 0zm-2 4a1 1 0 0 0-2 0v2c0 4.213 3.26 7.928 7.5 8.44V21H7.3a1 1 0 1 0 0 2h9.4a1 1 0 1 0 0-2H13v-1.56c4.24-.512 7.5-4.227 7.5-8.44V9a1 1 0 1 0-2 0v2c0 3.46-2.915 6.5-6.5 6.5S5.5 14.46 5.5 11z" clip-rule="evenodd"></path></svg></span></div></div></div></div><div class="splitLineWrapper-AjtWJo small-ErLq5N"><div class="splitLine-HjMFiZ"></div></div><div class="right-area-zo66jb"><div class="container-B20gJW break-btn-Rv8NnA !hidden small-ErLq5N" data-testid="chat_input_local_break_button" tabindex="0" aria-describedby="v7tm68d" data-popupid="v7tm68d"><span role="img" class="semi-icon semi-icon-default icon-JL6IvX"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M12 23c6.075 0 11-4.925 11-11S18.075 1 12 1 1 5.925 1 12s4.925 11 11 11m0-20a9 9 0 1 1 0 18 9 9 0 0 1 0-18m-2 5.5A1.5 1.5 0 0 0 8.5 10v4a1.5 1.5 0 0 0 1.5 1.5h4a1.5 1.5 0 0 0 1.5-1.5v-4A1.5 1.5 0 0 0 14 8.5z" clip-rule="evenodd"></path></svg></span></div><div class="container-LQV0KD send-btn-wrapper image-send-msg-button small-ErLq5N"><button disabled="" id="flow-end-msg-send" aria-disabled="true" data-testid="chat_input_send_button" class="semi-button semi-button-disabled semi-button-primary-disabled send-btn-gNkciw semi-button-with-icon semi-button-with-icon-only" type="button"><span class="semi-button-content"><span role="img" class="semi-icon semi-icon-default send-btn-icon-g2PbME"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="m3.543 8.883 7.042-7.047a2 2 0 0 1 2.828 0l7.043 7.046a1 1 0 0 1 0 1.415l-.701.701a1 1 0 0 1-1.414 0L13.3 5.956v15.792a1 1 0 0 1-1 1h-.99a1 1 0 0 1-1-1V6.342l-4.654 4.656a1 1 0 0 1-1.414 0l-.7-.7a1 1 0 0 1 0-1.415"></path></svg></span></span></button></div></div></div></div></div></div></div></div></div></div>

输入框 dom  是否包含
图像生成技能 dom <div class="flex items-center s-font-base-em text-s-color-brand-primary-default select-none" contenteditable="false">图像生成</div>

图像生成技能 如果不包含


查找页面内图像生成技能
<div class="flex-1 min-w-0 outline-none flex justify-center gap-12 flex-wrap -mt-12 pt-12 h-54 overflow-hidden"><div class="skill-bar-item-wrap pr-6 skill-bar-button !pr-0"><div class="skill-bar-item-lEBfE8 hover-highlight-b63SC1 hoverable-BHlIr5 activable-jsOe0W action-button-bottom-PvPF8L" data-testid="skill_bar_button_3"><div class="icon-CWGO4F"><span role="img" class="semi-icon semi-icon-default text-[#FF9500]"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M19.11 9.827c.26 0 .451-.192.488-.445.23-1.406.43-2.127.865-2.575.433-.447 1.131-.654 2.49-.89a.503.503 0 0 0 .446-.502.5.5 0 0 0-.447-.503c-1.358-.237-2.056-.445-2.49-.892-.433-.447-.634-1.168-.864-2.571-.037-.256-.227-.449-.488-.449-.257 0-.45.193-.49.447-.23 1.405-.432 2.126-.865 2.573s-1.13.655-2.486.892a.5.5 0 0 0-.451.503c0 .273.203.47.447.503 1.36.235 2.057.438 2.49.882.433.445.635 1.167.864 2.583.04.252.235.444.491.444M3.853 3.207h9.058v1.961H3.853v9.867l1.488-1.327a2.8 2.8 0 0 1 3.704-.037l1.011.867 3.428-2.886a2.8 2.8 0 0 1 3.621-.001l2.957 2.483v-2.346h1.907v7.601c0 1.084-.854 1.962-1.907 1.962H3.852c-1.052 0-1.906-.878-1.906-1.962V5.17c0-1.084.854-1.962 1.907-1.962m16.209 13.46-4.163-3.497a.93.93 0 0 0-1.207 0l-4.038 3.399a.93.93 0 0 1-1.214-.006l-1.615-1.385a.933.933 0 0 0-1.235.012l-2.737 2.44v1.76h16.209zm-9.535-7.625c0 1.084-.854 1.962-1.907 1.962s-1.907-.878-1.907-1.962c0-1.083.854-1.961 1.907-1.961s1.907.878 1.907 1.961" clip-rule="evenodd"></path></svg></span></div><div class="text-JSJKLD">图像生成</div></div></div><div class="skill-bar-item-wrap pr-6 skill-bar-button !pr-0"><div class="skill-bar-item-lEBfE8 hover-highlight-b63SC1 hoverable-BHlIr5 activable-jsOe0W action-button-bottom-PvPF8L" data-testid="skill_bar_button_17"><div class="icon-CWGO4F"><span role="img" class="semi-icon semi-icon-default text-[#f92d20] icon-S2MHvI"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M20.014 11.046a.514.514 0 0 1-.512.454.52.52 0 0 1-.515-.452c-.241-1.445-.452-2.18-.906-2.634-.455-.453-1.186-.66-2.612-.9A.52.52 0 0 1 15 7.002c0-.275.206-.487.473-.513 1.422-.242 2.153-.454 2.607-.91s.666-1.191.907-2.623a.52.52 0 0 1 .515-.456c.273 0 .473.197.512.458.24 1.43.451 2.165.906 2.622.455.455 1.187.667 2.61.909.266.027.47.24.47.513a.52.52 0 0 1-.468.512c-1.425.24-2.157.452-2.612.907-.455.456-.666 1.192-.907 2.625M13.732 4H3.5a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2h17a2 2 0 0 0 2-2v-6.232a6.5 6.5 0 0 1-2 .656V19h-17V6h9.576c.11-.711.335-1.385.656-2m-3.455 5.018 4.599 3.066a.5.5 0 0 1 0 .832l-4.599 3.066a.5.5 0 0 1-.777-.416V9.434a.5.5 0 0 1 .777-.416" clip-rule="evenodd"></path></svg></span></div><div class="text-JSJKLD">视频生成</div></div></div><div class="skill-bar-item-wrap pr-6 skill-bar-button !pr-0"><div class="skill-bar-item-lEBfE8 hover-highlight-b63SC1 hoverable-BHlIr5 activable-jsOe0W action-button-bottom-PvPF8L" data-testid="skill_bar_button_2"><div class="icon-CWGO4F"><span role="img" class="semi-icon semi-icon-default text-[#2FBC52]"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M5.122 8.242a.356.356 0 0 0 .355-.315c.167-.994.313-1.504.63-1.82.314-.316.822-.463 1.81-.63a.36.36 0 0 0 .325-.355.356.356 0 0 0-.325-.356c-.988-.167-1.496-.314-1.81-.63-.317-.316-.463-.826-.63-1.819A.356.356 0 0 0 5.122 2a.36.36 0 0 0-.357.316c-.167.993-.313 1.503-.629 1.82-.315.316-.822.463-1.808.63A.356.356 0 0 0 2 5.122c0 .193.147.332.326.356.988.166 1.496.31 1.81.624.316.314.462.825.63 1.826.029.178.17.314.356.314m14.42-2.05-2.383-2.383-1.229 1.23 2.382 2.382zm-2.49 2.49L14.668 6.3l-9.476 9.475 2.383 2.382zm1.368-6.134 2.383 2.382a1.784 1.784 0 0 1 0 2.523L8.655 19.6a1.8 1.8 0 0 1-.99.502l-4.017.618a.892.892 0 0 1-1.017-1.017l.618-4.017c.057-.375.233-.722.501-.99L15.898 2.548a1.783 1.783 0 0 1 2.522 0m.98 19.111a.46.46 0 0 1-.456.405.466.466 0 0 1-.459-.403c-.215-1.289-.403-1.945-.808-2.35-.405-.403-1.057-.587-2.328-.802a.464.464 0 0 1-.419-.456c0-.245.184-.434.422-.458 1.268-.215 1.92-.404 2.325-.81s.593-1.063.808-2.34a.466.466 0 0 1 .46-.407c.243 0 .421.176.456.408.214 1.276.402 1.932.808 2.339.406.406 1.058.595 2.328.81a.46.46 0 0 1 .419.458c0 .243-.185.43-.418.457-1.27.214-1.923.402-2.329.808-.405.407-.594 1.063-.808 2.341" clip-rule="evenodd"></path></svg></span></div><div class="text-JSJKLD">帮我写作</div></div></div><div aria-expanded="false" aria-haspopup="dialog" class="" tabindex="0" aria-controls="bxk11bj" data-popupid="bxk11bj"><div class="skill-bar-item-wrap skill-bar-button"><div class="skill-bar-item-lEBfE8 hover-highlight-b63SC1 hoverable-BHlIr5 activable-jsOe0W action-button-bottom-PvPF8L action-button-more-FTaQAS" data-testid="skill_bar_button_more"><div class="icon-CWGO4F"><span role="img" class="semi-icon semi-icon-default"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M17.377 11.625a.57.57 0 0 0 .569-.504c.267-1.592.502-2.41 1.007-2.917s1.319-.74 2.902-1.007a.576.576 0 0 0 .52-.57.57.57 0 0 0-.522-.57c-1.582-.269-2.395-.504-2.9-1.01-.505-.507-.74-1.324-1.007-2.914-.043-.289-.265-.508-.57-.508-.299 0-.524.219-.571.506-.268 1.592-.502 2.409-1.008 2.916-.504.506-1.316.741-2.897 1.01a.57.57 0 0 0-.525.57c0 .31.236.532.521.57 1.585.266 2.397.495 2.902 1 .505.503.74 1.32 1.007 2.926a.58.58 0 0 0 .572.502M4.25 2.125c-1.1 0-2 .9-2 2V9c0 1.1.9 2 2 2H9c1.1 0 2-.9 2-2V4.125c0-1.1-.9-2-2-2zm0 2H9V9H4.25zM13 15c0-1.1.9-2 2-2h4.75c1.1 0 2 .9 2 2v4.75c0 .85-.9 1.75-2 2H15c-1.1-.25-2-.9-2-2zm6.75 0H15v4.75h4.75zm-15.5-2c-1.1 0-2 .9-2 2v4.75c0 1.1.9 2 2 2H9c1.1 0 2-.9 2-2V15c0-1.1-.9-2-2-2zm0 2H9v4.75H4.25z" clip-rule="evenodd"></path></svg></span></div><div class="text-JSJKLD">更多</div></div></div></div></div>

点击选择图像生成技能
<div class="skill-bar-item-lEBfE8 hover-highlight-b63SC1 hoverable-BHlIr5 activable-jsOe0W action-button-bottom-PvPF8L" data-testid="skill_bar_button_3"><div class="icon-CWGO4F"><span role="img" class="semi-icon semi-icon-default text-[#FF9500]"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M19.11 9.827c.26 0 .451-.192.488-.445.23-1.406.43-2.127.865-2.575.433-.447 1.131-.654 2.49-.89a.503.503 0 0 0 .446-.502.5.5 0 0 0-.447-.503c-1.358-.237-2.056-.445-2.49-.892-.433-.447-.634-1.168-.864-2.571-.037-.256-.227-.449-.488-.449-.257 0-.45.193-.49.447-.23 1.405-.432 2.126-.865 2.573s-1.13.655-2.486.892a.5.5 0 0 0-.451.503c0 .273.203.47.447.503 1.36.235 2.057.438 2.49.882.433.445.635 1.167.864 2.583.04.252.235.444.491.444M3.853 3.207h9.058v1.961H3.853v9.867l1.488-1.327a2.8 2.8 0 0 1 3.704-.037l1.011.867 3.428-2.886a2.8 2.8 0 0 1 3.621-.001l2.957 2.483v-2.346h1.907v7.601c0 1.084-.854 1.962-1.907 1.962H3.852c-1.052 0-1.906-.878-1.906-1.962V5.17c0-1.084.854-1.962 1.907-1.962m16.209 13.46-4.163-3.497a.93.93 0 0 0-1.207 0l-4.038 3.399a.93.93 0 0 1-1.214-.006l-1.615-1.385a.933.933 0 0 0-1.235.012l-2.737 2.44v1.76h16.209zm-9.535-7.625c0 1.084-.854 1.962-1.907 1.962s-1.907-.878-1.907-1.962c0-1.083.854-1.961 1.907-1.961s1.907.878 1.907 1.961" clip-rule="evenodd"></path></svg></span></div><div class="text-JSJKLD">图像生成</div></div>

分支2
如果当前页面url是https://www.doubao.com/chat/27303205527347970 带有会话id了
检查 输入框 dom  是否包含 图像生成技能 dom 如果不包含 
点击技能按钮 因为带有会话id页面不存在 查找页面内图像生成技能 需要点击技能切换
<button chatid="27303205527347970" chattype="0" data-testid="chat-input-all-skill-button" aria-expanded="false" aria-haspopup="dialog" tabindex="0" class="semi-button semi-button-primary samantha-button-Gqjh9l tertiary-a_ZJsN medium-MN8t8q icon-kJ70hQ tool-button-H7mj_a button-VMDZon semi-button-with-icon" type="button" aria-disabled="false" aria-controls="se6l442" data-popupid="se6l442"><span class="semi-button-content"><span role="img" class="semi-icon semi-icon-default !text-16"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M17.377 11.625a.57.57 0 0 0 .569-.504c.267-1.592.502-2.41 1.007-2.917s1.319-.74 2.902-1.007a.576.576 0 0 0 .52-.57.57.57 0 0 0-.522-.57c-1.582-.269-2.395-.504-2.9-1.01-.505-.507-.74-1.324-1.007-2.914-.043-.289-.265-.508-.57-.508-.299 0-.524.219-.571.506-.268 1.592-.502 2.409-1.008 2.916-.504.506-1.316.741-2.897 1.01a.57.57 0 0 0-.525.57c0 .31.236.532.521.57 1.585.266 2.397.495 2.902 1 .505.503.74 1.32 1.007 2.926a.58.58 0 0 0 .572.502M4.25 2.125c-1.1 0-2 .9-2 2V9c0 1.1.9 2 2 2H9c1.1 0 2-.9 2-2V4.125c0-1.1-.9-2-2-2zm0 2H9V9H4.25zM13 15c0-1.1.9-2 2-2h4.75c1.1 0 2 .9 2 2v4.75c0 .85-.9 1.75-2 2H15c-1.1-.25-2-.9-2-2zm6.75 0H15v4.75h4.75zm-15.5-2c-1.1 0-2 .9-2 2v4.75c0 1.1.9 2 2 2H9c1.1 0 2-.9 2-2V15c0-1.1-.9-2-2-2zm0 2H9v4.75H4.25z" clip-rule="evenodd"></path></svg></span><span class="semi-button-content-right" x-semi-prop="children"><div class="flex items-center">技能</div></span></span></button>

弹出
<div class="samantha-popover-DRtvK_ !rounded-s-radius-xs p-4 min-w-180 more-skills-YPADO8 semi-popover-wrapper semi-popover-wrapper-show" role="dialog" x-placement="topLeft" id="se6l442" style="animation-fill-mode: forwards; transform-origin: 37px 100%;"><div class="semi-tooltip-content"><div class="semi-popover"><div class="semi-popover-content"><div class="max-h-290 flow-scrollbar overflow-auto more-skills-small-V6FCRT"><button class="py-8 px-6 rounded-s-radius-xxss hover:bg-s-color-bg-trans flex items-center gap-12 cursor-pointer border-none bg-transparent w-full justify-start text-left outline-none" data-testid="skill_bar_button_3"><span role="img" class="semi-icon semi-icon-default p-2 !text-16 text-s-color-text-primary"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M19.11 9.827c.26 0 .451-.192.488-.445.23-1.406.43-2.127.865-2.575.433-.447 1.131-.654 2.49-.89a.503.503 0 0 0 .446-.502.5.5 0 0 0-.447-.503c-1.358-.237-2.056-.445-2.49-.892-.433-.447-.634-1.168-.864-2.571-.037-.256-.227-.449-.488-.449-.257 0-.45.193-.49.447-.23 1.405-.432 2.126-.865 2.573s-1.13.655-2.486.892a.5.5 0 0 0-.451.503c0 .273.203.47.447.503 1.36.235 2.057.438 2.49.882.433.445.635 1.167.864 2.583.04.252.235.444.491.444M3.853 3.207h9.058v1.961H3.853v9.867l1.488-1.327a2.8 2.8 0 0 1 3.704-.037l1.011.867 3.428-2.886a2.8 2.8 0 0 1 3.621-.001l2.957 2.483v-2.346h1.907v7.601c0 1.084-.854 1.962-1.907 1.962H3.852c-1.052 0-1.906-.878-1.906-1.962V5.17c0-1.084.854-1.962 1.907-1.962m16.209 13.46-4.163-3.497a.93.93 0 0 0-1.207 0l-4.038 3.399a.93.93 0 0 1-1.214-.006l-1.615-1.385a.933.933 0 0 0-1.235.012l-2.737 2.44v1.76h16.209zm-9.535-7.625c0 1.084-.854 1.962-1.907 1.962s-1.907-.878-1.907-1.962c0-1.083.854-1.961 1.907-1.961s1.907.878 1.907 1.961" clip-rule="evenodd"></path></svg></span><p class="text-s-color-text-secondary s-font-small-strong">图像生成</p></button><button class="py-8 px-6 rounded-s-radius-xxss hover:bg-s-color-bg-trans flex items-center gap-12 cursor-pointer border-none bg-transparent w-full justify-start text-left outline-none" data-testid="skill_bar_button_2"><span role="img" class="semi-icon semi-icon-default p-2 !text-16 text-s-color-text-primary"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M5.122 8.242a.356.356 0 0 0 .355-.315c.167-.994.313-1.504.63-1.82.314-.316.822-.463 1.81-.63a.36.36 0 0 0 .325-.355.356.356 0 0 0-.325-.356c-.988-.167-1.496-.314-1.81-.63-.317-.316-.463-.826-.63-1.819A.356.356 0 0 0 5.122 2a.36.36 0 0 0-.357.316c-.167.993-.313 1.503-.629 1.82-.315.316-.822.463-1.808.63A.356.356 0 0 0 2 5.122c0 .193.147.332.326.356.988.166 1.496.31 1.81.624.316.314.462.825.63 1.826.029.178.17.314.356.314m14.42-2.05-2.383-2.383-1.229 1.23 2.382 2.382zm-2.49 2.49L14.668 6.3l-9.476 9.475 2.383 2.382zm1.368-6.134 2.383 2.382a1.784 1.784 0 0 1 0 2.523L8.655 19.6a1.8 1.8 0 0 1-.99.502l-4.017.618a.892.892 0 0 1-1.017-1.017l.618-4.017c.057-.375.233-.722.501-.99L15.898 2.548a1.783 1.783 0 0 1 2.522 0m.98 19.111a.46.46 0 0 1-.456.405.466.466 0 0 1-.459-.403c-.215-1.289-.403-1.945-.808-2.35-.405-.403-1.057-.587-2.328-.802a.464.464 0 0 1-.419-.456c0-.245.184-.434.422-.458 1.268-.215 1.92-.404 2.325-.81s.593-1.063.808-2.34a.466.466 0 0 1 .46-.407c.243 0 .421.176.456.408.214 1.276.402 1.932.808 2.339.406.406 1.058.595 2.328.81a.46.46 0 0 1 .419.458c0 .243-.185.43-.418.457-1.27.214-1.923.402-2.329.808-.405.407-.594 1.063-.808 2.341" clip-rule="evenodd"></path></svg></span><p class="text-s-color-text-secondary s-font-small-strong">帮我写作</p></button><button class="py-8 px-6 rounded-s-radius-xxss hover:bg-s-color-bg-trans flex items-center gap-12 cursor-pointer border-none bg-transparent w-full justify-start text-left outline-none" data-testid="skill_bar_button_5"><span role="img" class="semi-icon semi-icon-default p-2 !text-16 text-s-color-text-primary"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M7.128 1.894a.97.97 0 0 0-1.422 1.26H2.668a.97.97 0 0 0 0 1.94h1.084c.463 1.217 1.359 2.568 2.45 3.77-1.12.958-2.338 1.561-3.534 1.561a.97.97 0 0 0 0 1.94c1.882 0 3.574-.951 4.926-2.143 1.064.915 2.267 1.684 3.493 2.093a.97.97 0 0 0 .613-1.84c-.899-.3-1.851-.888-2.748-1.643 1.07-1.258 1.885-2.64 2.324-3.739h1.087a.97.97 0 0 0 0-1.939H8.808zm2.017 3.2H5.877c.389.75.97 1.582 1.683 2.381.666-.8 1.209-1.646 1.585-2.382M16.241 1.7a.97.97 0 1 0 0 1.939h3.878v4.363a.97.97 0 0 0 1.939 0V3.639c0-1.07-.868-1.939-1.939-1.939zM7.516 22.06a.97.97 0 0 0 0-1.94H3.638v-4.363a.97.97 0 0 0-1.94 0v4.363c0 1.071.869 1.94 1.94 1.94zm9.695-8.453 1.436 3.605h-2.872zm3.22 8.082-1.011-2.538h-4.418l-1.01 2.538a.97.97 0 1 1-1.802-.718l4.03-10.116c.357-.896 1.625-.896 1.982 0l4.03 10.116a.97.97 0 1 1-1.801.718" clip-rule="evenodd"></path></svg></span><p class="text-s-color-text-secondary s-font-small-strong">翻译</p></button><button class="py-8 px-6 rounded-s-radius-xxss hover:bg-s-color-bg-trans flex items-center gap-12 cursor-pointer border-none bg-transparent w-full justify-start text-left outline-none" data-testid="skill_bar_button_16"><span role="img" class="semi-icon semi-icon-default p-2 !text-16 text-s-color-text-primary"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M13.113 2.266a.936.936 0 0 1 .797 1.057l-2.476 17.614a.936.936 0 0 1-1.854-.26l2.476-17.615a.936.936 0 0 1 1.057-.796M6.811 6.744a.936.936 0 0 1 0 1.324l-3.55 3.55 3.55 3.551a.936.936 0 1 1-1.324 1.324l-4.213-4.212a.936.936 0 0 1 0-1.325l4.213-4.212a.936.936 0 0 1 1.324 0m15.447 4.213c.357.356.365.93.025 1.297a6.05 6.05 0 0 0-2.377-1.001l-3.185-3.185a.936.936 0 1 1 1.324-1.324zm-3.47 10.491a.48.48 0 0 0 .48-.425c.225-1.341.423-2.03.849-2.457.425-.426 1.11-.624 2.445-.849a.485.485 0 0 0 .438-.48.48.48 0 0 0-.44-.48c-1.332-.227-2.018-.425-2.443-.851-.426-.427-.624-1.115-.849-2.455a.48.48 0 0 0-.48-.428.49.49 0 0 0-.481.426c-.226 1.341-.423 2.03-.85 2.457-.424.426-1.108.624-2.44.85a.48.48 0 0 0-.442.481c0 .26.199.448.439.48 1.335.225 2.02.418 2.444.842.426.425.623 1.114.849 2.466.04.24.23.423.482.423" clip-rule="evenodd"></path></svg></span><p class="text-s-color-text-secondary s-font-small-strong">编程</p></button><button class="py-8 px-6 rounded-s-radius-xxss hover:bg-s-color-bg-trans flex items-center gap-12 cursor-pointer border-none bg-transparent w-full justify-start text-left outline-none" data-testid="skill_bar_button_25"><span role="img" class="semi-icon semi-icon-default p-2 !text-16 text-s-color-text-primary"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M18.124 1.902c1.147-.32 2.326.388 2.633 1.582l1.67 6.482c.306 1.193-.374 2.42-1.521 2.74l-3.115.868c-.982.274-1.988-.206-2.45-1.099l-3.878.903v2.855l5.014 4.638a1.15 1.15 0 0 1 .09 1.579 1.046 1.046 0 0 1-1.518.093l-4.66-4.31-4.661 4.31a1.046 1.046 0 0 1-1.518-.093 1.15 1.15 0 0 1 .09-1.58l5.013-4.637V13.88L4.7 14.953c-1.125.262-2.248-.445-2.546-1.604l-.58-2.248c-.298-1.159.335-2.356 1.435-2.714l10.408-3.39c-.03-1.014.61-1.953 1.593-2.227zm-2.418 3.576-.003-.012-.138-.535 3.115-.868 1.67 6.482-3.115.868-.138-.535-.003-.012zm-1.788 1.699L6.73 9.518l.648 2.519 7.35-1.711zm-8.639 5.349-.602-2.339-1.027.335.58 2.248z" clip-rule="evenodd"></path></svg></span><p class="text-s-color-text-secondary s-font-small-strong">深入研究</p></button><button class="py-8 px-6 rounded-s-radius-xxss hover:bg-s-color-bg-trans flex items-center gap-12 cursor-pointer border-none bg-transparent w-full justify-start text-left outline-none" data-testid="skill_bar_button_26"><span role="img" class="semi-icon semi-icon-default p-2 !text-16 text-s-color-text-primary"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2c5.523 0 10 4.477 10 10a10 10 0 0 1-5.13 8.733c-.482.27-1.074.032-1.294-.475-.22-.506.018-1.09.493-1.371a8 8 0 1 0-8.138 0c.475.28.712.864.492 1.371s-.812.745-1.294.475A10 10 0 0 1 2 12C2 6.477 6.477 2 12 2"></path><path fill="currentColor" d="M12 6a6 6 0 0 1 3.265 11.033c-.464.301-1.06.062-1.279-.446-.22-.506.025-1.087.461-1.425a4 4 0 1 0-4.895 0c.437.338.68.919.461 1.425-.22.508-.815.747-1.279.446A6 6 0 0 1 12 6"></path><path fill="currentColor" d="M12 10a2 2 0 1 1 0 4 2 2 0 0 1 0-4"></path></svg></span><p class="text-s-color-text-secondary s-font-small-strong">AI 播客</p></button><div aria-expanded="false" aria-haspopup="dialog" class="" tabindex="0" aria-controls="md12k7u" data-popupid="md12k7u"><button class="py-8 px-6 rounded-s-radius-xxss hover:bg-s-color-bg-trans flex items-center gap-12 cursor-pointer border-none bg-transparent w-full justify-start text-left outline-none" data-testid="skill_bar_button_133"><span role="img" class="semi-icon semi-icon-default p-2 !text-16 text-s-color-text-primary"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M12 1.25c5.937 0 10.75 4.813 10.75 10.75S17.937 22.75 12 22.75 1.25 17.937 1.25 12 6.063 1.25 12 1.25m0 2a8.75 8.75 0 1 0 0 17.5 8.75 8.75 0 0 0 0-17.5m0 3.25a5.5 5.5 0 1 1 0 11 5.5 5.5 0 0 1 0-11"></path></svg></span><p class="text-s-color-text-secondary s-font-small-strong">记录会议</p></button></div><button class="py-8 px-6 rounded-s-radius-xxss hover:bg-s-color-bg-trans flex items-center gap-12 cursor-pointer border-none bg-transparent w-full justify-start text-left outline-none" data-testid="skill_bar_button_9"><span role="img" class="semi-icon semi-icon-default p-2 !text-16 text-s-color-text-primary"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M18.477 10.256a.51.51 0 0 0 .51-.452c.24-1.427.45-2.16.903-2.615.453-.454 1.183-.664 2.602-.903a.516.516 0 0 0 .466-.51.51.51 0 0 0-.467-.512c-1.419-.24-2.148-.452-2.6-.906-.454-.454-.664-1.186-.904-2.612a.51.51 0 0 0-.51-.455.52.52 0 0 0-.513.454c-.24 1.426-.45 2.159-.903 2.614-.452.453-1.18.664-2.597.905a.51.51 0 0 0-.472.511c0 .277.212.477.468.51 1.42.24 2.149.445 2.601.897.453.452.663 1.185.903 2.624a.52.52 0 0 0 .513.45M12 5.774c0-.869.171-1.698.481-2.454l-6.096.84a.996.996 0 0 0-.86.987v11.087H4.279a3.238 3.238 0 1 0 3.238 3.237V6.494l4.484-.618zm6.475 6.475c.695 0 1.365-.11 1.993-.312v6.04a3.238 3.238 0 1 1-3.238-3.238h1.245z" clip-rule="evenodd"></path></svg></span><p class="text-s-color-text-secondary s-font-small-strong">音乐生成</p></button><button class="py-8 px-6 rounded-s-radius-xxss hover:bg-s-color-bg-trans flex items-center gap-12 cursor-pointer border-none bg-transparent w-full justify-start text-left outline-none" data-testid="skill_bar_button_11"><span role="img" class="semi-icon semi-icon-default p-2 !text-16 text-s-color-text-primary"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M18.922 10.09a.49.49 0 0 0 .489-.432c.23-1.368.43-2.07.865-2.506.434-.435 1.133-.636 2.494-.866a.495.495 0 0 0 .446-.489.49.49 0 0 0-.448-.49c-1.36-.23-2.058-.433-2.492-.867-.434-.436-.636-1.137-.865-2.503a.49.49 0 0 0-.489-.437.5.5 0 0 0-.491.435c-.23 1.367-.432 2.07-.866 2.505-.433.434-1.131.637-2.488.867a.49.49 0 0 0-.452.49c0 .266.203.457.448.49 1.361.229 2.06.425 2.492.858.434.433.636 1.135.866 2.514.04.245.235.432.491.432m-.956 1.837v3.891H8.898a.954.954 0 0 0-.955.955v2.863a.955.955 0 0 1-1.909 0V6.034q-.002-.44-.135-.835h6.845c.06-.629.214-1.23.447-1.79H3.41A2.625 2.625 0 0 0 .784 6.034V8.42c0 .528.428.955.955.955h2.386v10.261A2.864 2.864 0 0 0 6.99 22.5H18.92a2.864 2.864 0 0 0 2.863-2.864v-2.863a.955.955 0 0 0-.954-.955h-.955v-3.891a6.3 6.3 0 0 1-1.909 0M3.409 5.318c.396 0 .716.32.716.716v1.432H2.693V6.034c0-.395.32-.716.716-.716m16.466 14.318a.955.955 0 0 1-.954.955H9.689a2.9 2.9 0 0 0 .163-.955v-1.909h10.024zM8.66 7.705a.716.716 0 1 0 0 1.431h3.818a.716.716 0 0 0 0-1.431zm0 2.863a.716.716 0 1 0 0 1.432h6.205a.716.716 0 1 0 0-1.432z" clip-rule="evenodd"></path></svg></span><p class="text-s-color-text-secondary s-font-small-strong">解题答疑</p></button><button class="py-8 px-6 rounded-s-radius-xxss hover:bg-s-color-bg-trans flex items-center gap-12 cursor-pointer border-none bg-transparent w-full justify-start text-left outline-none" data-testid="skill_bar_button_13"><span role="img" class="semi-icon semi-icon-default p-2 !text-16 text-s-color-text-primary"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M18.602 10.244a.5.5 0 0 0 .5-.444c.235-1.4.442-2.12.887-2.566.444-.446 1.16-.652 2.554-.887A.507.507 0 0 0 23 5.846c0-.267-.2-.475-.459-.502-1.392-.236-2.108-.443-2.552-.888-.445-.446-.652-1.165-.887-2.564a.5.5 0 0 0-.5-.448.51.51 0 0 0-.504.446c-.235 1.4-.442 2.12-.886 2.566s-1.16.652-2.55.888a.5.5 0 0 0-.462.502c0 .272.208.468.459.501 1.394.235 2.109.437 2.553.88s.65 1.163.886 2.575a.51.51 0 0 0 .504.442m.976 8.8v-6.919a6.3 6.3 0 0 0 1.955-.641v7.56c0 1.08-.875 1.956-1.955 1.956H2.956A1.956 1.956 0 0 1 1 19.044V5.355C1 4.275 1.876 3.4 2.956 3.4h9.776a6.3 6.3 0 0 0-.469 1.955H2.956v13.69zM6.825 8.575a.978.978 0 1 0-1.383 1.383L7.684 12.2l-2.242 2.242a.978.978 0 0 0 1.383 1.383l2.926-2.927a.99.99 0 0 0 0-1.396zm4.442 6.558c0-.54.437-.978.977-.978h4.4a.978.978 0 1 1 0 1.956h-4.4a.98.98 0 0 1-.977-.978" clip-rule="evenodd"></path></svg></span><p class="text-s-color-text-secondary s-font-small-strong">数据分析</p></button></div></div></div></div></div>
使用图像生成技能




调节比例
<button aria-expanded="false" aria-haspopup="dialog" tabindex="0" data-testid="image-creation-chat-input-picture-ration-button" class="semi-button semi-button-primary samantha-button-Gqjh9l tertiary-a_ZJsN medium-MN8t8q icon-kJ70hQ button-VMDZon semi-button-with-icon" type="button" aria-disabled="false" aria-controls="tk1rbwc" data-popupid="tk1rbwc"><span class="semi-button-content"><span role="img" class="semi-icon semi-icon-default"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M21 5H3v4h12.5a2 2 0 0 1 2 2v8H21zm-11 6H3v8h7zm2 8v-8h3.5v8zm-1 2h10a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2z" clip-rule="evenodd"></path></svg></span><span class="semi-button-content-right" x-semi-prop="children"><div class="flex items-center">比例</div></span></span></button>
后弹出
<div class="semi-portal" style="z-index: 1030;"><div tabindex="-1" class="semi-portal-inner" style="left: 551px; top: 318px; transform: translateX(0%) translateY(-100%);"><div class="samantha-popover-DRtvK_ semi-popover-wrapper semi-popover-wrapper-show" role="dialog" x-placement="topLeft" id="tk1rbwc" style="animation-fill-mode: forwards; transform-origin: 37px 100%;"><div class="semi-tooltip-content"><div class="semi-popover"><div class="semi-popover-content"><div><div class="selection-baicXp" data-testid="image-creation-chat-input-picture-ration-panel"><div class="title-pTIzMu">比例</div><ul role="menu" aria-orientation="vertical" class="semi-dropdown-menu flow-dropdown-menu flow-dropdown-menu-qAbs5J"><li role="menuitem" tabindex="-1" aria-disabled="false" class="semi-dropdown-item" data-testid="dropdown-menu-item"><div><div class="option-item-qtzxGG"><div class="custom-select-item-ZX9VOD"><img class="mr-9 -ml-3 h-22 w-22 object-cover" src="https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/samantha/image-ratio/ic_ratio_1_1.svg"><div class="ratio-text-BhH369">1:1 正方形，头像</div></div></div></div></li><li role="menuitem" tabindex="-1" aria-disabled="false" class="semi-dropdown-item" data-testid="dropdown-menu-item"><div><div class="option-item-qtzxGG"><div class="custom-select-item-ZX9VOD"><img class="mr-9 -ml-3 h-22 w-22 object-cover" src="https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/samantha/image-ratio/ic_ratio_2_3.svg"><div class="ratio-text-BhH369">2:3 社交媒体, 自拍</div></div></div></div></li><li role="menuitem" tabindex="-1" aria-disabled="false" class="semi-dropdown-item" data-testid="dropdown-menu-item"><div><div class="option-item-qtzxGG"><div class="custom-select-item-ZX9VOD"><img class="mr-9 -ml-3 h-22 w-22 object-cover" src="https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/samantha/image-ratio/ic_ratio_4_3.svg"><div class="ratio-text-BhH369">4:3 文章配图，插画</div></div></div></div></li><li role="menuitem" tabindex="-1" aria-disabled="false" class="semi-dropdown-item" data-testid="dropdown-menu-item"><div><div class="option-item-qtzxGG"><div class="custom-select-item-ZX9VOD"><img class="mr-9 -ml-3 h-22 w-22 object-cover" src="https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/samantha/image-ratio/ic_ratio_9_16.svg"><div class="ratio-text-BhH369">9:16 手机壁纸，人像</div></div></div></div></li><li role="menuitem" tabindex="-1" aria-disabled="false" class="semi-dropdown-item" data-testid="dropdown-menu-item"><div><div class="option-item-qtzxGG"><div class="custom-select-item-ZX9VOD"><img class="mr-9 -ml-3 h-22 w-22 object-cover" src="https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/samantha/image-ratio/ic_ratio_16_9.svg"><div class="ratio-text-BhH369">16:9 桌面壁纸，风景</div></div></div></div></li></ul></div></div></div></div></div></div></div></div>

上传参考图
<button data-testid="image-creation-chat-input-picture-reference-button" class="semi-button semi-button-primary samantha-button-Gqjh9l tertiary-a_ZJsN medium-MN8t8q icon-kJ70hQ button-VMDZon semi-button-with-icon" type="button" aria-disabled="false"><span class="semi-button-content"><span role="img" class="semi-icon semi-icon-default text-16"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M20.5 5.25H4v10.11l1.594-1.328a2 2 0 0 1 2.581.017l1.636 1.401 4.119-3.463a2 2 0 0 1 1.55-.452A6.5 6.5 0 0 0 12.5 17c0 1.397.44 2.69 1.19 3.75H4a2 2 0 0 1-2-2V5.25a2 2 0 0 1 2-2h16.5a2 2 0 0 1 2 2v6.272a6.5 6.5 0 0 0-2-.848zm-12 6.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4M24 17a5 5 0 1 1-10 0 5 5 0 0 1 10 0m-4.25-2.5a.75.75 0 1 0-1.5 0v1.75H16.5a.75.75 0 1 0 0 1.5h1.75v1.75a.75.75 0 1 0 1.5 0v-1.75h1.75a.75.75 0 1 0 0-1.5h-1.75z" clip-rule="evenodd"></path></svg></span><span class="semi-button-content-right" x-semi-prop="children"><div class="flex items-center">参考图</div></span></span></button>

发送按钮
<div class="right-area-zo66jb"><div class="container-B20gJW break-btn-Rv8NnA !hidden" data-testid="chat_input_local_break_button" tabindex="0" aria-describedby="cphs4v5" data-popupid="cphs4v5"><span role="img" class="semi-icon semi-icon-default icon-JL6IvX"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M12 23c6.075 0 11-4.925 11-11S18.075 1 12 1 1 5.925 1 12s4.925 11 11 11m0-20a9 9 0 1 1 0 18 9 9 0 0 1 0-18m-2 5.5A1.5 1.5 0 0 0 8.5 10v4a1.5 1.5 0 0 0 1.5 1.5h4a1.5 1.5 0 0 0 1.5-1.5v-4A1.5 1.5 0 0 0 14 8.5z" clip-rule="evenodd"></path></svg></span></div><div class="container-LQV0KD send-btn-wrapper image-send-msg-button"><button disabled="" id="flow-end-msg-send" aria-disabled="true" data-testid="chat_input_send_button" class="semi-button semi-button-disabled semi-button-primary-disabled send-btn-gNkciw semi-button-with-icon semi-button-with-icon-only" type="button"><span class="semi-button-content"><span role="img" class="semi-icon semi-icon-default send-btn-icon-g2PbME"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="m3.543 8.883 7.042-7.047a2 2 0 0 1 2.828 0l7.043 7.046a1 1 0 0 1 0 1.415l-.701.701a1 1 0 0 1-1.414 0L13.3 5.956v15.792a1 1 0 0 1-1 1h-.99a1 1 0 0 1-1-1V6.342l-4.654 4.656a1 1 0 0 1-1.414 0l-.7-.7a1 1 0 0 1 0-1.415"></path></svg></span></span></button></div></div>


发送后监听server.js的逻辑


